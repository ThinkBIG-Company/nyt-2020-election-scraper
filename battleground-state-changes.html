<!-- Don't update me by hand, I'm generated by a program -->

<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="ANN Election Data" />
    <meta name="twitter:description" content="Battleground state changes, updated every five minutes using NYT data." />
    <meta name="twitter:url" content="https://thinkbig-company.github.io/nyt-2020-election-scraper/battleground-state-changes.html" />
    <meta property="og:title" content="ANN Election Data" />
    <meta property="og:description" content="Battleground state changes, updated every five minutes using NYT data." />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/16448231?s=460&u=5a0eaed5e7b1c2458115dd9f4f7d0600ce9a6ea4&v=4" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <link rel="apple-touch-icon" href="icon.png">
    <meta name="apple-mobile-web-app-title" content="2020 Results">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üó≥Ô∏è</text></svg>">
    <link rel="alternate" type="application/rss+xml" title="ANN Election Data RSS Feed" href="/nyt-2020-election-scraper/battleground-state-changes.xml" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css" integrity="sha512-oc9+XSs1H243/FRN9Rw62Fn8EtxjEYWHXRvjS43YtueEewbS6ObfXcJNyohjHqVKFPoXXUxwc+q1K7Dee6vv9g==" crossorigin="anonymous" />
    <style>
    .table-responsive.table-responsive {
      overflow-x: unset;
    }

    .timestamp {
      min-width: 8rem;
    }

    .hurdle {
      min-width: 15rem;
    }
    
    .table td, .table th {
        padding: .25rem .5rem;
    }

    .table.shrunk tbody tr:not(.always-visible) {
        display: none;
    }

    thead td {
      background-color: #e9ecef;
      line-height: 1.2rem;
    }

    thead .text-left {
        font-weight: normal;
    }

    thead span.statename {
        font-weight: bold;
        /* If changing these, update "thead tr:nth-child(2) th" too */
        font-size: 1.2rem;
        line-height: 1.2rem;
    }

    thead tr:nth-child(1) td {
        position: sticky;
        top: -1px;
        border-bottom: none;
    }

    thead tr:nth-child(2) th {
        position: sticky;
        /* Padding, first line, second line, padding */
        top: calc(.25rem + 1.2rem + 1.2rem + .25rem);
        border-right-width: 0;
        border-left-width: 0;
        border-top-width: 0;
    }
    thead tr:nth-child(2) th:first-child {
        border-left-width: 1px;
    }
    thead tr:nth-child(2) th:last-child {
        border-right-width: 1px;
    }

    tr {
        /* Fixes position: sticky headers from covering rows when deep linked, by keeping the anchor away from the top */
        scroll-margin-top: 130px;
    }

    .has-tip {
        text-decoration: underline;
        text-decoration-style: dotted;
    }

    .flag-bg {
        background-position: fixed;
        background-repeat: no-repeat;
        background-size: auto 100%;
        background-position: 100%;
    }

    .Biden{
        background-color: #84C4EE
    }
    .Trump{
        background-color: #ED98A9;
    }

    .numeric {
        text-align: right;
    }

    @media (prefers-color-scheme: dark) {
        body {
            color: #ffffff;
            background-color: #202020;
        }
        .table {
            color: #dedad6;
            background-color: #202020;
        }
        .table .thead-light th, .table .thead-light td {
            background-color: #495057;
            color: #e9ecef;
        }
        .table .thead-light th, .table td {
            border-color: #211d19;
        }
        .Biden {
            background-color: #05456F;
        }
        .Trump {
            background-color: #6E192A;
        }
    }
    </style>
    <title>Election 2020 Results</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js" integrity="sha512-/DXTXr6nQodMUiq+IUJYCt2PPOUjrHJ9wFrqpJ3XkgPNOZVfMok7cRw6CSxyCQxXn6ozlESsSh1/sMCTF1rL/g==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.bundle.min.js" integrity="sha512-iceXjjbmB2rwoX93Ka6HAHP+B76IY1z0o3h+N1PeDtRSsyeetU3/0QKJqGyPJcX63zysNehggFwMC/bi7dvMig==" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.9.5/dayjs.min.js" integrity="sha512-C2m821NxMpJ4Df47O4P/17VPqt0yiK10UmGl59/e5ynRRYiCSBvy0KHJjhp2XIjUJreuR+y3SIhVyiVilhCmcQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.9.5/plugin/utc.min.js" integrity="sha512-aU7mUs3uE+MWJv+ihaotHKxd2z1kdCV4EhMlfXKSLVZ0GUJRmH/6EWAHzLSqNeL90lxGWbQczw7qyxLTfDwGbg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.9.5/plugin/relativeTime.min.js" integrity="sha512-ZpD5q39qjKdG3a3p8cttXCwl9C7InezFKiIVFaxmethhYdzvYTMxJuqqg3I0WmI5D7G4Qt0HiYfXjagboH8/jQ==" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.9.6/plugin/advancedFormat.min.js" integrity="sha512-Ns942wI9RVUMPQ2VKNew/VVO0fLwTGAXkNI+TM+4OdeLiYr51OSY6vsHNXb030MVy9ZI8bsELX4uHyphtiIw3g==" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.9.6/plugin/timezone.min.js" integrity="sha512-c/OdxdorFhLdlutQgC1m6enucrygqZ5Sq6nho3MWQ8jHadejJgkmBlRQXM6V2TNnfPqmJ6Hnl5+TvAosxqV4IA==" crossorigin="anonymous"></script>
	
    <script type="text/javascript">
        dayjs.extend(dayjs_plugin_relativeTime)
        dayjs.extend(dayjs_plugin_utc)
        dayjs.extend(dayjs_plugin_advancedFormat)
        dayjs.extend(dayjs_plugin_timezone)

        const prettyTime = timestamp => dayjs.utc(timestamp.replace(" UTC", ""), 'YYYY-MM-DD HH:MM:SS').fromNow()
        const localTime = timestamp => dayjs.utc(timestamp.replace(" UTC", ""), 'YYYY-MM-DD HH:MM:SS').local().format('DD MMM YYYY h:mm:ss A z');

        const handleNode = node => {
            if (node.classList && node.classList.contains('timestamp')) {
                let timestamp;
                if (node.hasAttribute('data-timestamp')) {
                    timestamp = node.getAttribute('data-timestamp');
                } else {
                    timestamp = node.innerHTML;
                    node.setAttribute('data-timestamp', timestamp);
                }
                node.innerHTML = `<abbr class='pretty-timestamp' data-toggle='tooltip' title='${localTime(timestamp)}' time='${localTime(timestamp)}'>${prettyTime(timestamp)}</abbr>`;
            }
        };

        new MutationObserver(mutations => {
            for (let i = 0, len = mutations.length; i < len; i++) {
                let added = mutations[i].addedNodes;
                for (let j = 0, node; (node = added[j]); j++) {
                    if (node.tagName === 'td' || node.tagName === 'span') {
                        handleNode(node);
                    } else if (node.firstElementChild) {
                        for (const child of node.querySelectorAll('td,span')) {
                            handleNode(child);
                        }
                    }
                }
            }
        }).observe(document, {
            childList: true,
            subtree: true,
        });

        setInterval(() => {
            $(".pretty-timestamp").map((_, tselem) => {
                tselem.innerText = prettyTime(tselem.parentElement.getAttribute("data-timestamp"));
            });
        }, 60 * 1000);
    </script>
</head>

<body>
<div id="body" class="container-fluid">
    <div class="row">
        <div class="col-sm">
            <p style="font-size: 1.4rem;">
                All data below is sourced from an unofficial API powering the New York Times‚Äô election site.
				<br>
                <strong>The estimated votes remaining and county-level breakdown values might be off!!!</strong>
				<br>
                Consult state websites and officials for the most accurate and up-to-date figures.
				<br>
                This website is <a href="https://github.com/thinkbig-company/nyt-2020-election-scraper">open source</a> and was written by <a href="https://github.com/thinkbig-company/nyt-2020-election-scraper/graphs/contributors">these people</a>.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm">
            <p class="float-left" id="timestamps">Last scrape: <span class="timestamp">2020-11-14 09:46:08 UTC</span> | Last batch: <span class="timestamp">2020-11-14 05:13:23 UTC</span></p>
            <div id="template-hash" style="display: none;">07b506a53cdd1c15b35d3498262002035d006cf96c33f21d72c3b846205d006e</div>
        </div>
        <div class="col-sm">
            <p class="float-right">
            <button type='button' id='live_update_button' class='btn btn-secondary'>Enable Live Updates</button>
            <button type='button' id='shrink_button' class='btn btn-secondary'>Shrink Tables</button>
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm">
            <div class='table-responsive'><table id='alaska' class='table table-bordered'>

        <thead class="thead-light">
        <tr>
            <td class="text-left flag-bg" style="background-image: url('flags/alaska.svg')" colspan="9">
                <span class="has-tip" data-toggle="tooltip" title="Number of electoral votes contributed by this state and total votes by each candidate.">
                    <span class="statename">Alaska (EV: 3)</span>
                </span>
                <br>
                Total Votes: <strong>322,117</strong> Trump leads with 179,080 votes <strong>55.59%</strong>, Biden trails with 143,037 votes <strong>44.41%</strong>.
                <br>
                <strong>Difference: 36,043 votes</strong>
            </td>
        </tr>
        <tr>
            <th class="has-tip" data-toggle="tooltip" title="When did this block of votes get reported?">Timestamp</th>
            <th class="has-tip" data-toggle="tooltip" title="Which candidate currently leads this state?">In The Lead</th>
            <th class="has-tip" data-toggle="tooltip" title="How many votes separate the two candidates?">Vote Differential</th>
            <th class="has-tip" data-toggle="tooltip" title="Approximately how many votes are remaining to be counted? These values might be off! Consult state websites and officials for the most accurate and up-to-date figures.">Votes Remaining (est.)</th>
            <th class="has-tip" data-toggle="tooltip" title="How many votes were reported in this block?">Change</th>
            <th class="has-tip" data-toggle="tooltip" title="How did the votes in this block break down, per candidate. Based on the number of reported votes and the change in differential.">Block Breakdown</th>
            <th class="has-tip" data-toggle="tooltip" title="How has the trailing candidate's share of recent blocks trended? Computed using a moving average of previous 30k votes.">Block Trend</th>
            <th class="has-tip" data-toggle="tooltip" title="What percentage of the remaining votes does the trailing candidate need to flip the lead. 'Flip' happens at 50%, not at 0%.">Hurdle</th>
        </tr>
        </thead>
    

        <tr id='alaska-2020-11-14T02:45:04.626000'>
            <td class="timestamp">2020-11-14 02:45:04 UTC</td>
            <td class="Trump">Trump</td>
            <td>36,043</td>
            <td>31,217</td>
            <td>  9,595</td>
    
            <td>
                Trump 54.6% /
                45.4% Biden
            </td>
        
            <td>
                Biden is averaging 56.1%
            </td>
        
            <td>Biden needs 105.84% [14.894%]</td>
        </tr>
    

        <tr id='alaska-2020-11-13T13:58:10.379000'>
            <td class="timestamp">2020-11-13 13:58:10 UTC</td>
            <td class="Trump">Trump</td>
            <td>35,163</td>
            <td>40,812</td>
            <td> 13,161</td>
    
            <td>
                Trump 40.3% /
                59.7% Biden
            </td>
        
            <td>
                Biden is averaging 62.0%
            </td>
        
            <td>Biden needs 90.94% [7.897%]</td>
        </tr>
    

        <tr id='alaska-2020-11-13T02:34:07.937000'>
            <td class="timestamp">2020-11-13 02:34:07 UTC</td>
            <td class="Trump">Trump</td>
            <td>37,721</td>
            <td>53,973</td>
            <td> 25,245</td>
    
            <td>
                Trump 36.3% /
                63.7% Biden
            </td>
        
            <td>
                Biden is averaging 62.1%
            </td>
        
            <td>Biden needs 83.05% [6.791%]</td>
        </tr>
    

        <tr id='alaska-2020-11-12T16:45:22.414000'>
            <td class="timestamp">2020-11-12 16:45:22 UTC</td>
            <td class="Trump">Trump</td>
            <td>44,650</td>
            <td>79,218</td>
            <td> 25,805</td>
    
            <td>
                Trump 46.3% /
                53.7% Biden
            </td>
        
            <td>
                Biden is averaging 53.6%
            </td>
        
            <td>Biden needs 76.25% [6.065%]</td>
        </tr>
    

        <tr id='alaska-2020-11-11T13:19:23.895000'>
            <td class="timestamp">2020-11-11 13:19:23 UTC</td>
            <td class="Trump">Trump</td>
            <td>46,544</td>
            <td>105,023</td>
            <td> 20,749</td>
    
            <td>
                Trump 47.1% /
                52.9% Biden
            </td>
        
            <td>
                Biden is averaging 54.2%
            </td>
        
            <td>Biden needs 70.19% [3.172%]</td>
        </tr>
    

        <tr id='alaska-2020-11-11T02:53:02.196000'>
            <td class="timestamp">2020-11-11 02:53:02 UTC</td>
            <td class="Trump">Trump</td>
            <td>47,767</td>
            <td>125,772</td>
            <td> 49,264</td>
    
            <td>
                Trump 43.1% /
                56.9% Biden
            </td>
        
            <td>
                Biden is averaging 56.9%
            </td>
        
            <td>Biden needs 67.02% [3.485%]</td>
        </tr>
    

        <tr id='alaska-2020-11-09T19:14:34.730000'>
            <td class="timestamp">2020-11-09 19:14:34 UTC</td>
            <td class="Trump">Trump</td>
            <td>54,598</td>
            <td>175,036</td>
            <td> 18,939</td>
    
            <td>
                Trump 58.5% /
                41.5% Biden
            </td>
        
            <td>
                Biden is averaging 37.1%
            </td>
        
            <td>Biden needs 63.53% [2.309%]</td>
        </tr>
    

        <tr id='alaska-2020-11-04T18:40:57.265000'>
            <td class="timestamp">2020-11-04 18:40:57 UTC</td>
            <td class="Trump">Trump</td>
            <td>51,382</td>
            <td>193,975</td>
            <td> 39,556</td>
    
            <td>
                Trump 70.4% /
                29.6% Biden
            </td>
        
            <td>
                Biden is averaging 29.6%
            </td>
        
            <td>Biden needs 61.22% [5.837%]</td>
        </tr>
    

        <tr id='alaska-2020-11-04T13:28:22.084000'>
            <td class="timestamp">2020-11-04 13:28:22 UTC</td>
            <td class="Trump">Trump</td>
            <td>35,241</td>
            <td>233,531</td>
            <td>      0</td>
    <td>N/A</td><td>N/A</td>
            <td>Biden needs 55.39% [-44.613%]</td>
        </tr>
    
</table></div><hr>
<div class='table-responsive'><table id='arizona' class='table table-bordered'>

        <thead class="thead-light">
        <tr>
            <td class="text-left flag-bg" style="background-image: url('flags/arizona.svg')" colspan="9">
                <span class="has-tip" data-toggle="tooltip" title="Number of electoral votes contributed by this state and total votes by each candidate.">
                    <span class="statename">Arizona (EV: 11)</span>
                </span>
                <br>
                Total Votes: <strong>3,332,966</strong> Biden leads with 1,671,491 votes <strong>50.15%</strong>, Trump trails with 1,661,475 votes <strong>49.85%</strong>.
                <br>
                <strong>Difference: 10,016 votes</strong>
            </td>
        </tr>
        <tr>
            <th class="has-tip" data-toggle="tooltip" title="When did this block of votes get reported?">Timestamp</th>
            <th class="has-tip" data-toggle="tooltip" title="Which candidate currently leads this state?">In The Lead</th>
            <th class="has-tip" data-toggle="tooltip" title="How many votes separate the two candidates?">Vote Differential</th>
            <th class="has-tip" data-toggle="tooltip" title="Approximately how many votes are remaining to be counted? These values might be off! Consult state websites and officials for the most accurate and up-to-date figures.">Votes Remaining (est.)</th>
            <th class="has-tip" data-toggle="tooltip" title="How many votes were reported in this block?">Change</th>
            <th class="has-tip" data-toggle="tooltip" title="How did the votes in this block break down, per candidate. Based on the number of reported votes and the change in differential.">Block Breakdown</th>
            <th class="has-tip" data-toggle="tooltip" title="How has the trailing candidate's share of recent blocks trended? Computed using a moving average of previous 30k votes.">Block Trend</th>
            <th class="has-tip" data-toggle="tooltip" title="What percentage of the remaining votes does the trailing candidate need to flip the lead. 'Flip' happens at 50%, not at 0%.">Hurdle</th>
        </tr>
        </thead>
    

        <tr id='arizona-2020-11-14T01:04:05.989000'>
            <td class="timestamp">2020-11-14 01:04:05 UTC</td>
            <td class="Biden">Biden</td>
            <td>10,016</td>
            <td>4,436</td>
            <td>  3,102</td>
    
            <td>
                Biden 33.8% /
                66.2% Trump
            </td>
        
            <td>
                Trump is averaging 54.5%
            </td>
        
            <td>Trump needs 162.13% [39.785%]</td>
        </tr>
    

        <tr id='arizona-2020-11-14T00:08:43.069000'>
            <td class="timestamp">2020-11-14 00:08:43 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,022</td>
            <td>7,538</td>
            <td>    424</td>
    
            <td>
                Biden 54.2% /
                45.8% Trump
            </td>
        
            <td>
                Trump is averaging 53.0%
            </td>
        
            <td>Trump needs 122.34% [4.119%]</td>
        </tr>
    

        <tr id='arizona-2020-11-13T21:41:43.884000'>
            <td class="timestamp">2020-11-13 21:41:43 UTC</td>
            <td class="Biden">Biden</td>
            <td>10,986</td>
            <td>7,962</td>
            <td>      2</td>
    <td>N/A</td>
            <td>
                Trump is averaging 53.1%
            </td>
        
            <td>Trump needs 118.22% [0.005%]</td>
        </tr>
    

        <tr id='arizona-2020-11-13T18:17:11.739000'>
            <td class="timestamp">2020-11-13 18:17:11 UTC</td>
            <td class="Biden">Biden</td>
            <td>10,988</td>
            <td>7,964</td>
            <td>  3,681</td>
    
            <td>
                Biden 43.9% /
                56.1% Trump
            </td>
        
            <td>
                Trump is averaging 53.1%
            </td>
        
            <td>Trump needs 118.22% [19.891%]</td>
        </tr>
    

        <tr id='arizona-2020-11-13T04:13:29.688000'>
            <td class="timestamp">2020-11-13 04:13:29 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,434</td>
            <td>11,645</td>
            <td>  4,057</td>
    
            <td>
                Biden 54.9% /
                45.1% Trump
            </td>
        
            <td>
                Trump is averaging 52.5%
            </td>
        
            <td>Trump needs 98.33% [13.958%]</td>
        </tr>
    

        <tr id='arizona-2020-11-13T03:18:29.398000'>
            <td class="timestamp">2020-11-13 03:18:29 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,034</td>
            <td>15,702</td>
            <td>      0</td>
    <td>N/A</td>
            <td>
                Trump is averaging 54.2%
            </td>
        
            <td>Trump needs 84.37% [-4.670%]</td>
        </tr>
    

        <tr id='arizona-2020-11-13T02:53:09.611000'>
            <td class="timestamp">2020-11-13 02:53:09 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,034</td>
            <td>13,860</td>
            <td>      0</td>
    <td>N/A</td>
            <td>
                Trump is averaging 54.2%
            </td>
        
            <td>Trump needs 89.04% [0.026%]</td>
        </tr>
    

        <tr id='arizona-2020-11-13T02:43:48.354000'>
            <td class="timestamp">2020-11-13 02:43:48 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,034</td>
            <td>13,869</td>
            <td>      0</td>
    <td>N/A</td>
            <td>
                Trump is averaging 54.2%
            </td>
        
            <td>Trump needs 89.01% [4.380%]</td>
        </tr>
    

        <tr id='arizona-2020-11-13T00:47:45.452000'>
            <td class="timestamp">2020-11-13 00:47:45 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,034</td>
            <td>15,585</td>
            <td>  1,122</td>
    
            <td>
                Biden 34.1% /
                65.9% Trump
            </td>
        
            <td>
                Trump is averaging 54.2%
            </td>
        
            <td>Trump needs 84.63% [1.312%]</td>
        </tr>
    

        <tr id='arizona-2020-11-12T21:41:04.029000'>
            <td class="timestamp">2020-11-12 21:41:04 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,390</td>
            <td>16,707</td>
            <td>  5,589</td>
    
            <td>
                Biden 48.7% /
                51.3% Trump
            </td>
        
            <td>
                Trump is averaging 54.0%
            </td>
        
            <td>Trump needs 83.32% [8.217%]</td>
        </tr>
    

        <tr id='arizona-2020-11-12T21:31:44.996000'>
            <td class="timestamp">2020-11-12 21:31:44 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,536</td>
            <td>22,296</td>
            <td>      1</td>
    <td>N/A</td>
            <td>
                Trump is averaging 55.2%
            </td>
        
            <td>Trump needs 75.10% [-0.001%]</td>
        </tr>
    

        <tr id='arizona-2020-11-12T17:36:42.542000'>
            <td class="timestamp">2020-11-12 17:36:42 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,537</td>
            <td>22,297</td>
            <td>      0</td>
    <td>N/A</td>
            <td>
                Trump is averaging 55.2%
            </td>
        
            <td>Trump needs 75.10% [0.037%]</td>
        </tr>
    

        <tr id='arizona-2020-11-12T17:27:43.895000'>
            <td class="timestamp">2020-11-12 17:27:43 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,537</td>
            <td>22,329</td>
            <td>    127</td>
    
            <td>
                Biden 11.4% /
                88.6% Trump
            </td>
        
            <td>
                Trump is averaging 55.2%
            </td>
        
            <td>Trump needs 75.07% [-0.072%]</td>
        </tr>
    

        <tr id='arizona-2020-11-12T03:20:22.382000'>
            <td class="timestamp">2020-11-12 03:20:22 UTC</td>
            <td class="Biden">Biden</td>
            <td>11,635</td>
            <td>22,456</td>
            <td> 13,143</td>
    
            <td>
                Biden 45.5% /
                54.5% Trump
            </td>
        
            <td>
                Trump is averaging 55.0%
            </td>
        
            <td>Trump needs 75.14% [7.887%]</td>
        </tr>
    

        <tr id='arizona-2020-11-11T23:15:16.621000'>
            <td class="timestamp">2020-11-11 23:15:16 UTC</td>
            <td class="Biden">Biden</td>
            <td>12,828</td>
            <td>35,599</td>
            <td>  4,966</td>
    
            <td>
                Biden 50.2% /
                49.8% Trump
            </td>
        
            <td>
                Trump is averaging 56.8%
            </td>
        
            <td>Trump needs 67.25% [2.223%]</td>
        </tr>
    

        <tr id='arizona-2020-11-11T03:16:43.081000'>
            <td class="timestamp">2020-11-11 03:16:43 UTC</td>
            <td class="Biden">Biden</td>
            <td>12,813</td>
            <td>40,565</td>
            <td>      0</td>
    <td>N/A</td>
            <td>
                Trump is averaging 58.0%
            </td>
        
            <td>Trump needs 65.03% [0.000%]</td>
        </tr>
    

        <tr id='arizona-2020-11-11T02:17:22.998000'>
            <td class="timestamp">2020-11-11 02:17:22 UTC</td>
            <td class="Biden">Biden</td>
            <td>12,813</td>
            <td>40,565</td>
            <td>  5,291</td>
    
            <td>
                Biden 42.7% /
                57.3% Trump
            </td>
        
            <td>
                Trump is averaging 58.0%
            </td>
        
            <td>Trump needs 65.03% [0.984%]</td>
        </tr>
    

        <tr id='arizona-2020-11-11T01:48:23.341000'>
            <td class="timestamp">2020-11-11 01:48:23 UTC</td>
            <td class="Biden">Biden</td>
            <td>13,582</td>
            <td>45,856</td>
            <td>    342</td>
    
            <td>
                Biden 60.5% /
                39.5% Trump
            </td>
        
            <td>
                Trump is averaging 58.4%
            </td>
        
            <td>Trump needs 64.05% [0.187%]</td>
        </tr>
    

        <tr id='arizona-2020-11-11T01:12:20.537000'>
            <td class="timestamp">2020-11-11 01:12:20 UTC</td>
            <td class="Biden">Biden</td>
            <td>13,510</td>
            <td>46,198</td>
            <td>    384</td>
    
            <td>
                Biden 16.9% /
                83.1% Trump
            </td>
        
            <td>
                Trump is averaging 58.6%
            </td>
        
            <td>Trump needs 63.86% [-0.152%]</td>
        </tr>
    

        <tr id='arizona-2020-11-11T00:53:02.360000'>
            <td class="timestamp">2020-11-11 00:53:02 UTC</td>
            <td class="Biden">Biden</td>
            <td>13,764</td>
            <td>46,582</td>
            <td>      2</td>
    <td>N/A</td>
            <td>
                Trump is averaging 58.3%
            </td>
        
            <td>Trump needs 64.01% [-0.002%]</td>
        </tr>
    

        <tr id='arizona-2020-11-11T00:40:04.002000'>
            <td class="timestamp">2020-11-11 00:40:04 UTC</td>
            <td class="Biden">Biden</td>
            <td>13,766</td>
            <td>46,584</td>
            <td>  1,290</td>
    
            <td>
                Biden 32.7% /
                67.3% Trump
            </td>
        
            <td>
                Trump is averaging 58.3%
            </td>
        
            <td>Trump needs 64.01% [-0.069%]</td>
        </tr>
    

        <tr id='arizona-2020-11-10T23:21:41.803000'>
            <td class="timestamp">2020-11-10 23:21:41 UTC</td>
            <td class="Biden">Biden</td>
            <td>14,213</td>
            <td>47,874</td>
            <td>    914</td>
    
            <td>
                Biden 36.1% /
                63.9% Trump
            </td>
        
            <td>
                Trump is averaging 57.9%
            </td>
        
            <td>Trump needs 64.08% [0.017%]</td>
        </tr>

    
</table></div><hr>
        </div>
    </div>
</div>
    <script type="text/javascript">
        const features = {};
        const isFeatureEnabled = key => localStorage.getItem(key) === 'true';

        const feature = (key, buttonId, defaultValue, onEnable, onDisable) => {
            if (localStorage.getItem(key) == null) {
                localStorage.setItem(key, defaultValue);
            }

            const button = $(buttonId);
            button.on('click', function() {
                if (isFeatureEnabled(key)) {
                    localStorage.setItem(key, 'false');
                    onDisable(button);
                } else {
                    localStorage.setItem(key, 'true');
                    onEnable(button);
                }
            });

            if (isFeatureEnabled(key)) {
                onEnable(button);
            }

            features[key] = {
                buttonId,
                onEnable,
                onDisable
            };
        };

        const refreshFeature = key => {
            if (isFeatureEnabled(key)) {
                features[key].onEnable($(features[key].buttonId));
            } else {
                features[key].onDisable($(features[key].buttonId));
            }
        };
    </script>

    <script type="text/javascript">
        const loadTooltips = () => {
            $(function () {
                $('[data-title]').removeAttr('title');
                $('[data-toggle="tooltip"]').tooltip({ boundary: 'window' })
            })
        };
        loadTooltips();

        const shrinkTablesFeature = 'shrunk';
        feature(shrinkTablesFeature, '#shrink_button', true, button => {
            button.html('Expand Tables');
            $('.table').addClass('shrunk');
        }, button => {
            button.html('Shrink Tables');
            $('.table').removeClass('shrunk');
        });
    </script>

    <script type="text/javascript">
        // grab the latest html and return it as a Document
        const fetchLatestContent = async () => {
            const contentResponse = await fetch(location.toString(), {
                cache: 'no-cache',
            });
            const contentBody = await contentResponse.text();
            const contentDom = new DOMParser().parseFromString(contentBody, 'text/html');

            let contentMetadata;
            if (contentDom.getElementById("page-metadata")) {
                contentMetadata = JSON.parse(contentDom.getElementById("page-metadata").innerText);
            } else {
                contentMetadata = {
                    template_hash: contentDom.getElementById("template-hash").innerText,
                };
            }
            return {
                metadata: contentMetadata,
                dom: contentDom,
            }
        };

        // check if the current host is a development host
        const isDeveloperEnvironment = () => {
            return location.protocol === 'file:' || location.hostname === 'localhost' || location.hostname === '127.0.0.1';
        };

        // if the new page has notifications, show them
        // if the new page is an updated template, hard refresh (which should get us the new page since we just loaded it)
        // otherwise, replace the div id=body element
        const updateCheck = async (currentMetadata, forceNotify) => {
            const latestContent = await fetchLatestContent();
            const latestMetadata = latestContent.metadata;
            const latestDom = latestContent.dom;
            console.log("latest content", latestContent);

            let shouldNotify = latestMetadata.states_updated.length && (
                forceNotify ||
                (currentMetadata && currentMetadata.results_hash !== latestMetadata.results_hash)
            );

            if (currentMetadata && currentMetadata.template_hash !== latestMetadata.template_hash) {
                console.log("new template, forcing reload");
                if (shouldNotify) {
                    location.hash = "notify";
                }
                location.reload(true);
                return;
            }

            if (shouldNotify && Notification.permission === "granted") {
                const notification = new Notification(`New ballots were counted in: ${latestMetadata.states_updated.join(", ")}!`);
                notification.onclick = function (event) {
                    // focus page
                    window.parent.focus();
                    // just in case, older browsers
                    window.focus();
                    // dismiss notification
                    event.target.close();
                };
            }

            $('[data-toggle="tooltip"]').tooltip('hide')

            const elementsToUpdate = [
                ...Array.from(document.getElementsByTagName("table")),
                document.getElementById("timestamps"),
            ];

            elementsToUpdate.forEach(oldElement => {
                let newElement = latestContent.dom.getElementById(oldElement.id);
                oldElement.parentNode.replaceChild(newElement, oldElement);
            });

            loadTooltips();
            refreshFeature(shrinkTablesFeature);

            return latestContent.metadata;
        };

        // do a test update
        updateCheck(undefined, location.hash === '#notify');
        location.hash = "";

        const startLiveUpdates = async () => {
            let currentMetadata = (await fetchLatestContent()).metadata;
            console.log("current content", currentMetadata);

            const nextCheck = () => {
                return isDeveloperEnvironment() ? 5 * 1000 : 60 * 1000;
            };

            const runner = async () => {
                if (!isFeatureEnabled(liveUpdatesFeature)) return;

                try {
                    currentMetadata = await updateCheck(currentMetadata, false);
                } catch (e) {
                    console.log("failed to check for updates", e);
                }
                setTimeout(runner, nextCheck());
            };

            setTimeout(runner, nextCheck());
        };

        const liveUpdatesFeature = 'live-updates';
        feature(liveUpdatesFeature, '#live_update_button', false, button => {
            button.html('Disable Live Updates');

            if ('Notification' in window && Notification.permission !== 'granted') {
                Notification.requestPermission();
            }

            startLiveUpdates();
        }, button => {
            button.html('Enable Live Updates');
        });
    </script>
</body>
